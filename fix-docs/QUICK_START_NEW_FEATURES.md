# ğŸ¯ æ–°åŠŸèƒ½å¿«é€Ÿå¼€å§‹

## âœ¨ v1.1.2 æ–°å¢ï¼šç½‘ç»œå†²çªè‡ªåŠ¨æ£€æµ‹

ç°åœ¨è„šæœ¬å¯ä»¥**è‡ªåŠ¨æ£€æµ‹å¹¶æç¤ºç½‘ç»œå†²çª**ï¼Œé¿å…é‡åˆ°ç±»ä¼¼çš„å†…ç½‘è®¿é—®é—®é¢˜ï¼

---

## ğŸš€ ç«‹å³ä½¿ç”¨

### 1ï¸âƒ£ åº”ç”¨æ›´æ–°ï¼ˆä¸€æ¬¡æ€§ï¼‰

```bash
cd /Users/leo/github.com/swiftbar-warp-control
sudo cp scripts/warp-control.sh /usr/local/bin/warp-control.sh
```

### 2ï¸âƒ£ ä½¿ç”¨æ–°åŠŸèƒ½

#### æ–¹å¼ A: é›†æˆæ£€æµ‹ï¼ˆæ¨èï¼‰
```bash
# æŸ¥çœ‹ WARP çŠ¶æ€æ—¶è‡ªåŠ¨æ£€æŸ¥ç½‘ç»œå†²çª
sudo /usr/local/bin/warp-control.sh status
```

#### æ–¹å¼ B: å®Œæ•´è¯Šæ–­
```bash
# è¿è¡Œè¯¦ç»†çš„ç½‘ç»œè¯Šæ–­
bash diagnose-network.sh
```

---

## ğŸ“‹ åŠŸèƒ½æ¼”ç¤º

### åœºæ™¯ 1: ä¸€åˆ‡æ­£å¸¸

```bash
$ sudo /usr/local/bin/warp-control.sh status

=== WARP Daemon Status ===
âœ… Daemon: Running

=== WARP Connection Status ===
Status update: Connected

=== Network Conflict Check ===
âœ… æœªå‘ç°ç½‘ç»œå†²çª           â† å¤ªå¥½äº†ï¼
```

### åœºæ™¯ 2: å‘ç° Docker å†²çª

```bash
$ sudo /usr/local/bin/warp-control.sh status

=== Network Conflict Check ===
âš ï¸  å‘ç° Docker ç½‘ç»œä½¿ç”¨ä¼ä¸šç½‘æ®µï¼š
172.20.0.0/16

ğŸ’¡ å»ºè®®ä¿®æ”¹ Docker ç½‘ç»œé…ç½®ï¼š
   - ç¼–è¾‘ docker-compose.yml
   - å°† subnet æ”¹ä¸º 10.x.x.x ç½‘æ®µ
   - ç„¶åæ‰§è¡Œ: docker-compose down && docker-compose up -d
```

**ç«‹å³ä¿®å¤ï¼š**
```bash
# 1. æ‰¾åˆ° docker-compose.yml
find ~/ -name "docker-compose.yml" -exec grep -l "172.20" {} \;

# 2. ç¼–è¾‘æ–‡ä»¶ï¼Œä¿®æ”¹ subnet
vim /path/to/docker-compose.yml

# 3. é‡å»ºç½‘ç»œ
cd /path/to/project
docker-compose down
docker-compose up -d

# 4. éªŒè¯
bash diagnose-network.sh
```

---

## ğŸ” å®Œæ•´è¯Šæ–­å·¥å…·

### ä½¿ç”¨æ–¹æ³•

```bash
cd /Users/leo/github.com/swiftbar-warp-control
bash diagnose-network.sh
```

### è¯Šæ–­å†…å®¹

```
[1/6] æ£€æŸ¥æœ¬åœ°ç½‘ç»œæ¥å£
     â†’ æ£€æµ‹ä½¿ç”¨ä¼ä¸šç½‘æ®µçš„æ¥å£

[2/6] æ£€æŸ¥ Docker ç½‘ç»œé…ç½®
     â†’ åˆ—å‡ºæ‰€æœ‰ Docker ç½‘ç»œ
     â†’ æ ‡è®°å†²çªçš„ç½‘æ®µ

[3/6] æ£€æŸ¥è·¯ç”±è¡¨
     â†’ æŸ¥æ‰¾å¯èƒ½å†²çªçš„è·¯ç”±

[4/6] æ£€æŸ¥ WARP çŠ¶æ€
     â†’ éªŒè¯è¿æ¥çŠ¶æ€
     â†’ æ˜¾ç¤º Split Tunnel é…ç½®

[5/6] æ£€æŸ¥ DNS é…ç½®
     â†’ ç¡®è®¤ä½¿ç”¨ Cloudflare DNS

[6/6] æ£€æŸ¥å¸¸è§å†²çªåœºæ™¯
     â†’ è™šæ‹ŸåŒ–è½¯ä»¶æ£€æµ‹
     â†’ VPN å†²çªæ£€æµ‹
```

### è¾“å‡ºç¤ºä¾‹

```bash
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          WARP ç½‘ç»œå†²çªè¯Šæ–­å·¥å…·                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[1/6] æ£€æŸ¥æœ¬åœ°ç½‘ç»œæ¥å£
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å‘ç° 10.x.x.x ç½‘æ®µï¼š
  â€¢ 10.20.0.1 (bridge100)

[2/6] æ£€æŸ¥ Docker ç½‘ç»œé…ç½®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Docker ç½‘ç»œé…ç½®æ­£å¸¸

[3/6] æ£€æŸ¥è·¯ç”±è¡¨
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… è·¯ç”±è¡¨æœªå‘ç°å†²çª

[4/6] æ£€æŸ¥ WARP çŠ¶æ€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… WARP å·²è¿æ¥

[5/6] æ£€æŸ¥ DNS é…ç½®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… DNS é…ç½®æ­£ç¡®ï¼ˆCloudflare DNSï¼‰

[6/6] æ£€æŸ¥å¸¸è§å†²çªåœºæ™¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… æœªå‘ç°å¸¸è§å†²çªåœºæ™¯

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        è¯Šæ–­æ€»ç»“                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ç½‘ç»œé…ç½®è‰¯å¥½ï¼Œæœªå‘ç°å†²çª
```

---

## ğŸ’¡ å®é™…åº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹ï¼šæ— æ³•è®¿é—®å…¬å¸å†…ç½‘

**é—®é¢˜ï¼š**
```bash
$ curl https://internal-server.company.com
Failed to connect to internal-server.company.com port 443
```

**è¯Šæ–­ï¼š**
```bash
$ bash diagnose-network.sh

[2/6] æ£€æŸ¥ Docker ç½‘ç»œé…ç½®
âš ï¸  ç½‘ç»œ 'myapp_network' ä½¿ç”¨ä¼ä¸šç½‘æ®µ: 172.20.0.0/16
```

**è§£å†³ï¼š**
```bash
# 1. æ‰¾åˆ° docker-compose.yml
cd ~/projects/myapp

# 2. ä¿®æ”¹ç½‘ç»œé…ç½®
sed -i '' 's/172.20.0.0\/16/10.20.0.0\/16/' docker-compose.yml

# 3. é‡å»º
docker-compose down && docker-compose up -d

# 4. æµ‹è¯•
curl https://internal-server.company.com
# HTTP/1.1 200 OK âœ…
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| [APPLY_UPDATES.md](./APPLY_UPDATES.md) | å¦‚ä½•åº”ç”¨æ›´æ–° |
| [NETWORK_DIAGNOSTICS.md](./NETWORK_DIAGNOSTICS.md) | è¯Šæ–­åŠŸèƒ½è¯¦è§£ |
| [NETWORK_CONFLICT_FIX.md](./NETWORK_CONFLICT_FIX.md) | å†²çªä¿®å¤æŒ‡å— |
| [FINAL_SUMMARY.md](./FINAL_SUMMARY.md) | å®Œæ•´ä¿®å¤æ€»ç»“ |

---

## âš¡ å¿«é€Ÿå‘½ä»¤

```bash
# åº”ç”¨æ›´æ–°
sudo cp scripts/warp-control.sh /usr/local/bin/warp-control.sh

# æŸ¥çœ‹çŠ¶æ€ï¼ˆå«å†²çªæ£€æµ‹ï¼‰
sudo /usr/local/bin/warp-control.sh status

# å®Œæ•´è¯Šæ–­
bash diagnose-network.sh

# æµ‹è¯•è¿æ¥
curl -I https://your-internal-server.com
```

---

## âœ… æ£€æŸ¥æ¸…å•

åº”ç”¨æ›´æ–°åï¼ŒéªŒè¯ä»¥ä¸‹åŠŸèƒ½ï¼š

- [ ] è¿è¡Œ `sudo /usr/local/bin/warp-control.sh status`
- [ ] çœ‹åˆ° "=== Network Conflict Check ===" éƒ¨åˆ†
- [ ] è¿è¡Œ `bash diagnose-network.sh`
- [ ] è·å¾—è¯¦ç»†çš„è¯Šæ–­æŠ¥å‘Š
- [ ] å¦‚æœæœ‰å†²çªï¼ŒæŒ‰æç¤ºä¿®å¤
- [ ] æµ‹è¯•è®¿é—®å…¬å¸å†…ç½‘æœåŠ¡

---

## ğŸ¯ ä¸»è¦ä¼˜åŠ¿

| ä¼˜åŠ¿ | è¯´æ˜ |
|------|------|
| ğŸ” **è‡ªåŠ¨æ£€æµ‹** | æ— éœ€æ‰‹åŠ¨æ’æŸ¥ç½‘ç»œé…ç½® |
| ğŸ’¡ **æ™ºèƒ½æç¤º** | å‘ç°é—®é¢˜ç«‹å³ç»™å‡ºä¿®å¤å»ºè®® |
| ğŸš€ **å¿«é€Ÿè¯Šæ–­** | 6ä¸ªæ­¥éª¤å®Œæ•´åˆ†æç½‘ç»œçŠ¶æ€ |
| ğŸ“‹ **è¯¦ç»†æŠ¥å‘Š** | æ¸…æ™°çš„å½©è‰²è¾“å‡ºæ˜“äºç†è§£ |
| ğŸ”§ **é¢„é˜²é—®é¢˜** | æå‰å‘ç°æ½œåœ¨å†²çª |

---

**å¼€å§‹ä½¿ç”¨æ–°åŠŸèƒ½ï¼Œè®©ç½‘ç»œé—®é¢˜ä¸€ç›®äº†ç„¶ï¼** ğŸ‰

